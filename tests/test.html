<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link type="text/css" href="testsuite.css" media="screen"  rel="stylesheet"/>
<script type="text/javascript" src="../jquery-1.3.2.min.js" ></script>
<script type="text/javascript" src="../grider.js" ></script>
<script type="text/javascript" src="testrunner.js"></script>
<title>Grider Tests</title>
<style>
table{border-collapse:collapse}
.num{text-align:right}
input{width: 8em;}
td{padding: 2px;}
.summary{text-align: right; font-weight: bold;}
</style>
</head>
<body>

        <h1>Tests for Grider</h1>
        <h2 id="banner"></h2>
        <h2 id="userAgent"></h2>
        <ol id="tests"></ol>
        <!--<div id="results"></div>-->
        <div id="main"></div>  

 <table border="1" id="table1" >
            <tr>
                <th col="product">Product</th>
                <th col="price" summary="max">Price</th>
                <th col="quantity" summary="avg">Quantity</th>
                <th col="discount">Discount</th>
                <th col="subtotal" formula="price*quantity*(1 - 0.10 * discount)" summary="sum">Subtotal</th>
            </tr>
            <tr>
                <td>
                    <select name="det[0][product]" >
                        <option value="1">Computer</option>
                        <option value="2">Iphone</option>
                        <option value="3" selected="selected">Mouse</option>
                        <option value="4">Keyboard</option>
                        <option value="5">Pantalla</option>
                        <option value="6">USB Memmory</option>
                        <option value="7">CD Burnner</option>
                        <option value="8">Hard Disk</option>
                        <option value="9">Motherboard</option>
                        <option value="10">Case</option>
                    </select>
                </td>
                <td>
                    <input name="det[0][price]" type="text" class="num" value="10" />
                </td>
                <td>
                    <input name="det[0][quantity]" type="text" class="num" value="1" />
                </td>
                <td>
                    <input name="det[0][discount]" type="checkbox" checked="checked" />
                </td>
                <td class="num">
                </td>
            </tr>
            <tr>
                <td>
                    <select name="det[0][product]" >
                        <option value="1">Computer</option>
                        <option value="2">Iphone</option>
                        <option value="3">Mouse</option>
                        <option value="4">Keyboard</option>
                        <option value="5">Pantalla</option>
                        <option value="6">USB Memmory</option>
                        <option value="7">CD Burnner</option>
                        <option value="8">Hard Disk</option>
                        <option value="9">Motherboard</option>
                        <option value="10">Case</option>
                    </select>
                </td>
                <td>
                    <input name="det[1][price]" type="text" class="num" value="2.33" />
                </td>
                <td>
                    <input name="det[1][quantity]" type="text" class="num" value="3" />
                </td>
                <td>
                    <input name="det[1][discount]" type="checkbox" />
                </td>
                <td class="num">
                </td>
            </tr>
            <tr>
                <td>
                    <select name="det[0][product]" >
                        <option value="1">Computer</option>
                        <option value="2">Iphone</option>
                        <option value="3">Mouse</option>
                        <option value="4">Keyboard</option>
                        <option value="5">Pantalla</option>
                        <option value="6">USB Memmory</option>
                        <option value="7">CD Burnner</option>
                        <option value="8">Hard Disk</option>
                        <option value="9">Motherboard</option>
                        <option value="10">Case</option>
                    </select>
                </td>
                <td>
                    <input name="det[2][price]" type="text" class="num" value="5.5" />
                </td>
                <td>
                    <input name="det[2][quantity]" type="text" class="num" value="2" />
                </td>
                <td>
                    <input name="det[2][discount]" type="checkbox" />
                </td>
                <td class="num">
                </td>
            </tr>

        </table>



<div id="testDiv"></div>
</body>
</html>
<script>
// Tests
$(document).ready(function() {
  //$.Grider.prototype.defaults = {decimals:3};
  $('#table1').grider({countRow: true, countRowAdd: true}); 
  test("Table converted", function() {
    var rows = $('#table1 tr').length;
    equals( 5, rows, "Expected 5 Rows" );
    equals(2, $('#table1 tr.noedit').length, 0, "2 Rows with .noedit class");
    equals(7, $('#table1 tr:not(.noedit):first td').length, "7 Columns");
    // Checks for added cols
    equals("NÂº", $("#table1 tr:first th:first").html(), "added Number rows");
    equlas("", $());
  });

  test("Operations should be correct", function() {
    // Formulas
    equals( "9.00", $('#table1 tr:not(.noedit):first td:eq(5)').html(), "Subtotal with discount should be 9.00");
    equals( "6.99", $('#table1 tr:not(.noedit):eq(1) td:eq(5)').html(), "Subtotal with discount should be 6.99");
    // Summary
    equals( "10.00", $('#table1 tr.noedit:last td:eq(2)').html(), "Summary for max in product should be 10.00");
    equals( "2.00", $('#table1 tr.noedit:last td:eq(3)').html(), "Summary for avg in price should be 2.00");
    equals( "26.99", $('#table1 tr.noedit:last td:eq(5)').html(), "Summary for subtotal should be 26.99");

  });
});
</script>
